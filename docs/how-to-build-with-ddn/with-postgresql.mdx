---
sidebar_position: 11
sidebar_label: With PostgreSQL
description: "Learn the basics of Hasura DDN and how to get started with a Postgres database."
keywords:
  - hasura ddn
  - graphql api
  - getting started
  - guide
  - postgres
---

import Prereqs from "@site/docs/_prereqs.mdx";
import { PqlChat, User, Pql, QueryPlanComponent } from "@site/src/components/PqlChat/PqlChat";

# Get Started with Hasura PromptQL and PostgreSQL

## Overview

This tutorial takes about twenty minutes to complete. You'll learn how to:

- Set up a new Hasura DDN project to use with PromptQL
- Connect it to a PostgreSQL database
- Generate Hasura metadata
- Create a build
- Run your first query with PromptQL

Additionally, we'll familiarize you with the steps and workflows necessary to iterate on your data source.

This tutorial assumes you're starting from scratch; you can with use an existing PostgreSQL database that you have or
the PostgreSQL docker image ships with the data connector.

<Prereqs />

## Tutorial

### Step 1. Authenticate your CLI

```sh title="Before you can create a new Hasura DDN project for PromptQL, you need to authenticate your CLI:"
ddn auth login
```

This will launch a browser window prompting you to log in or sign up for Hasura DDN. After you log in, the CLI will
acknowledge your login, giving you access to Hasura Cloud resources.

### Step 2. Scaffold out a new local project

```sh title="Next, create a new local project:"
ddn supergraph init my-project --with-promptql && cd my-project
```

Once you move into this directory, you'll see your project scaffolded out for you. You can view the structure by either
running `ls` in your terminal, or by opening the directory in your preferred editor.

### Step 3. Initialize your PostgreSQL connector

```sh title="In your project directory, run:"
ddn connector init my_pg -i
```

### Step 4. Add your own connection string or use the included Postgres docker image

From the dropdown, select `/hasura/postgres` (you can type to filter the list). You'll be asked to provide a connection
string to your PostgreSQL database. If you have one, enter it. DDN will never modify your source schema.

:::info Optionally, use the included PostgreSQL docker compose file

If you don't have one, you can leave this blank to use the included PostgreSQL docker compose file which will spin up a
PostgreSQL database and a postgres-adminer instance you can use to seed with some data and use for development.

The CLI will output something similar to this:

```plaintext
HINT To access the local Postgres database:
- Run: docker compose -f app/connector/my_pg/compose.postgres-adminer.yaml up -d
- Open Adminer in your browser at http://localhost:5143 and create tables
- To connect to the database using other clients use postgresql://user:password@local.hasura.dev:8105/dev
```

:::

### Step 5. Introspect your PostgreSQL database

```sh title="Next, use the CLI to introspect your PostgreSQL database:"
ddn connector introspect my_pg
```

After running this, you should see a representation of your database's schema in the
`app/connector/my_pg/configuration.json` file; you can view this using `cat` or open the file in your editor.

```sh title="Additionally, you can check which resources are available â€” and their status â€” at any point using the CLI:"
ddn connector show-resources my_pg
```

### Step 6. Add your resources

```sh title="Now, track the table from your PostgreSQL database as a model in your DDN metadata:"
ddn model add my_pg "*"
ddn command add my_pg "*"
ddn relationship add my_pg "*"
```

Open the `app/metadata` directory and you'll find newly-generated file(s) ending in `.hml`. The DDN CLI will use these
Hasura Metadata Language file to represent the tables from PostgreSQL to PromptQL as
[models](/reference/metadata-reference/models.mdx), [commands](/reference/metadata-reference/commands.mdx), and
[relationships](/reference/metadata-reference/relationships.mdx).

### Step 7. Optional: Add semantic information to your metadata

It is highly recommended to provide extra natural language descriptions of the resources in your project so that the LLM
can better understand your data and create appropriate query plans.

The description field can be added to `Model`, `Command` and `Relationship` metadata elements to provide semantic
context. See more about [semantic information here](/data-modeling/semantic-information.mdx).

- What the table represents
- Key relationships
- Important business rules
- Data lifecycle information

### Step 8. Create a new build

```sh title="To create a local build, run:"
ddn supergraph build local
```

The build is stored as a set of JSON files in `engine/build`.

### Step 9. Start your local services

```sh title="Start your local Hasura DDN Engine and PostgreSQL connector:"
ddn run docker-start
```

Your terminal will be taken over by logs for the different services.

### Step 10. Chat with your data

```sh title="In a new terminal tab, open your local console:"
ddn console --local
```

Once the PromptQL interface is open, ask a question about your data:

<PqlChat>
  <User>Hi, what are some questions you can answer?</User>
  <Pql>
    I can help you analyze data from what appears to be an e-commerce system. Here are some types of questions I can answer:

    <ol>
        <li>Product-related:</li>
        <ul>
            <li>Find popular products based on orders or reviews</li>
            <li>Analyze product pricing across categories</li>
            <li>Look up product details and descriptions</li>
            <li>Find products from specific manufacturers or countries</li>
        </ul>
        <li>Order and Purchase Analysis:</li>
        <ul>
            <li>Track order statuses</li>
            <li>Analyze delivery times</li>
            <li>Look at purchase patterns</li>
            <li>Find abandoned carts</li>
        </ul>
        <li>Customer Behavior:</li>
        <ul>
            <li>Analyze customer reviews and ratings</li>
            <li>Look at shopping patterns</li>
            <li>Track cart abandonment</li>
            <li>Study product category preferences</li>
        </ul>
        <li>Business Metrics:</li>
        <ul>
            <li>Calculate sales metrics</li>
            <li>Analyze review scores</li>
            <li>Track coupon usage</li>
            <li>Monitor cart completion rates</li>
        </ul>
    </ol>

    Would you like me to explore any of these areas in particular?

  </Pql>
</PqlChat>

### Step 11. Iterate on your PostgreSQL schema

If something changes in your PostgreSQL schema, you can iterate on your data model by following the steps in the
[iteration guide](/data-modeling/iterate.mdx).

## Next steps

Congratulations on completing your first Hasura PromptQL project with PostgreSQL! ðŸŽ‰

Here's what you just accomplished:

- You started with a fresh project and connected it to a PostgreSQL database.
- You set up metadata to represent your database schema, which acts as the blueprint for PromptQL.
- Then, you created a build â€” essentially compiling everything into a ready-to-use structure â€” and successfully ran your
  first PromptQL queries to learn about your data.

Now, you're equipped to connect and expose your data, empowering you to iterate and scale with confidence. Great work!

Take a look at our [PostgreSQL docs](/reference/connectors/postgresql/index.mdx) to learn more about how to use Hasura
PromptQL with PostgreSQL. Or, if you're ready, get started with adding [permissions](/auth/permissions/index.mdx) to
control access to your data.
